<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>铸造数字藏品页面</title>
    <link rel="stylesheet" href="css/casting.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- 引入jQuery库 -->
</head>
<body>
    <header>
        <div class="info-container">
            <img src="" alt="头像" id="avatar" class="avatar">
            <h1 class="name" id="name"></h1>
            <p class="balance" id="balance"></p>
        </div>
    </header>
<nav>
    <ul>
        <li><a href="personal-info.html">个人信息</a></li>
        <li><a href="#">铸造数字藏品</a></li>
        <li><a href="display.html">展示藏品</a></li>
        <li><a href="search.html">搜索藏品</a></li>
        <li><a href="purchase.html">购买藏品</a></li>
        <li><a href="transfer.html">转增藏品</a></li>
        <li><a href="trace.html">追溯藏品</a></li>
    </ul>
</nav>
<section>
    <h2>铸造数字藏品表单</h2>
    <form id="form" enctype="multipart/form-data">
        <div>
            <label for="name1">藏品名字：</label>
            <input type="text" id="name1" name="name">
        </div>
        <div>
            <label for="description">藏品描述：</label>
            <textarea id="description" name="description" rows="5"></textarea>
        </div>
        <div>
            <label for="type">藏品类型：</label>
            <select id="type" name="type">
                <option value="artwork">艺术作品</option>
                <option value="music">音乐作品</option>
                <option value="video">视频作品</option>
                <option value="game">游戏道具</option>
            </select>
        </div>
        <div>
            <label for="price">藏品价格：</label>
            <input type="number" id="price" name="price" step="0.0001">
        </div>
        <div>
            <label for="file">上传文件：</label>
            <input type="file" id="file" name="file">
        </div>
        <button type="submit" id="submit-btn">提交</button>
    </form>
</section>
<footer>
    <p>版权所有 &copy; 2023 藏品管理系统</p>
</footer>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(function() {
        // 获取个人信息
        $.getJSON("/login", function(data) {
            $("#avatar").attr("src", "https://ipfs.io/ipfs/" + data.image);
            $("#name").text(data.name);
            $("#new-name").val(data.name);  // 将当前姓名填入输入框
            $("#balance").text("余额：" + data.balance); // 显示余额
        });
        });
    $(document).ready(function() {
        $("#form").submit(function(event) {
            event.preventDefault();

            // 获取表单数据
            let formData = new FormData(this);

            // 发送POST请求
            $.ajax({
                url: '/mint',
                type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                success: function(response) {
                    console.log(response);
                    // 处理请求成功的结果
                    console.log("success");
                },
                error: function(error) {
                    console.error(error);
                    // 处理请求失败的结果
                }
            });
        });
    });
</script>
</body>
</html>